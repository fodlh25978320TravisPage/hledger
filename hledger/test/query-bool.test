<
2022-01-01 Transaction 1       ; transactiontag:A
    assets:bank:main       -1  ; A comment
    expenses:food

2022-01-01 Transaction 2       ; transactiontag:A
    assets:bank:main       -1
    assets:bank:secondary  -1  ; atag:a
    expenses:food

2022-01-01 Transaction 3       ; transactiontag:B
    assets:bank:main       -1  ; A comment
    expenses:drink

2022-01-01 Transaction 4       ; transactiontag:B
    assets:bank:main       -1  ; A comment
    expenses:food           2
    expenses:drink

# 1. Simple queries can be encased in an arbitrary number of parentheses (1)
$ hledger -f - print "(tag:'transactiontag=B')"
2022-01-01 Transaction 3  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:drink

2022-01-01 Transaction 4  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:food                  2
    expenses:drink

>=

# 2. Simple queries can be encased in an arbitrary number of parentheses (3)
$ hledger -f - print "(((tag:'transactiontag=B')))"
2022-01-01 Transaction 3  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:drink

2022-01-01 Transaction 4  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:food                  2
    expenses:drink

>=

# 3. Simple boolean AND query works
$ hledger -f - print tag:'transactiontag=B' AND desc:3
2022-01-01 Transaction 3  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:drink

>=

# 4. AND + OR works without parentheses
$ hledger -f - print tag:'transactiontag=B' AND desc:3 OR desc:1
2022-01-01 Transaction 1  ; transactiontag:A
    assets:bank:main              -1  ; A comment
    expenses:food

2022-01-01 Transaction 3  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:drink

>=

# 5. Unnecessary NOT + OR works without parentheses
$ hledger -f - print NOT tag:'transactiontag=B' OR desc:1
2022-01-01 Transaction 1  ; transactiontag:A
    assets:bank:main              -1  ; A comment
    expenses:food

2022-01-01 Transaction 2  ; transactiontag:A
    assets:bank:main                   -1
    assets:bank:secondary              -1  ; atag:a
    expenses:food

>=

# 6. Necessary NOT + OR works without parentheses
$ hledger -f - print NOT tag:'transactiontag=B' OR desc:4
2022-01-01 Transaction 1  ; transactiontag:A
    assets:bank:main              -1  ; A comment
    expenses:food

2022-01-01 Transaction 2  ; transactiontag:A
    assets:bank:main                   -1
    assets:bank:secondary              -1  ; atag:a
    expenses:food

2022-01-01 Transaction 4  ; transactiontag:B
    assets:bank:main              -1  ; A comment
    expenses:food                  2
    expenses:drink

>=
